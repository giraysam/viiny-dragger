/*! viiny-dragger 2015-12-22 */
!function(a){"use strict";window.ViinyDragger=a()}(function(){function a(b,c){return new a.instance(b,c)}function b(a){this.options=a,this.lastMouseX=0,this.lastMouseY=0,this.elmX=0,this.elmY=0}function c(a){this.Positions=a}function d(a){c.call(this,a)}function e(a){c.call(this,a)}var f=!1;return b.prototype={getOptions:function(){return this.options},setLastMouseX:function(a){this.lastMouseX=a},setLastMouseY:function(a){this.lastMouseY=a},setElmX:function(a){this.elmX=a},setElmY:function(a){this.elmY=a},getX:function(){return this.lastMouseX-this.elmX},getY:function(){return this.lastMouseY-this.elmY}},c.prototype={getOptions:function(){return this.Positions.getOptions()},setLastMouseX:function(a){this.Positions.setLastMouseX(a)},setLastMouseY:function(a){this.Positions.setLastMouseY(a)},setElmX:function(a){this.Positions.setElmX(a)},setElmY:function(a){this.Positions.setElmY(a)},getX:function(){return this.Positions.getX()},getY:function(){return this.Positions.getY()}},d.prototype=new c,d.prototype.getX=function(){var a=this.Positions.getOptions().snapX;return Math.round(this.Positions.getX()/a)*a},d.prototype.getY=function(){var a=this.Positions.getOptions().snapY;return Math.round(this.Positions.getY()/a)*a},e.prototype=new c,e.prototype.getX=function(){var a=this.Positions.getOptions().axisX;return 1==a?this.Positions.getX():null},e.prototype.getY=function(){var a=this.Positions.getOptions().axisY;return 1==a?this.Positions.getY():null},a.instance=function(a,c){var f={snapX:1,snapY:1,axisX:!0,axisY:!0,onStart:function(a,b){},onDrag:function(a,b){},onStop:function(a,b){}},g=this;this.el=a,this.options=this.extend(f,c),this.Positions=new b(this.options),this.Positions=new d(this.Positions),this.Positions=new e(this.Positions),this.el.onmousedown=function(a){g.mousedownHandler(a)}},a.instance.prototype={mousedownHandler:function(a){var b=document.all?window.event:a,c=this,d=document.all?window.event.clientX:a.pageX,e=document.all?window.event.clientY:a.pageY;b.preventDefault?b.preventDefault():document.onselectstart=function(){return!1},"function"==typeof this.options.onStart&&this.options.onStart(b,this.el),f=!0,this.el.style.zIndex=99999,this.Positions.setLastMouseX(d),this.Positions.setLastMouseY(e),this.Positions.setElmX(d-this.el.offsetLeft),this.Positions.setElmY(e-this.el.offsetTop),document.onmousemove=function(a){var b=document.all?window.event:a;c.mousemoveHandler(b)},document.onmouseup=function(a){var b=document.all?window.event:a;c.mouseupHandler(b)}},mousemoveHandler:function(a){var b=document.all?window.event.clientX:a.pageX,c=document.all?window.event.clientY:a.pageY;this.Positions.setLastMouseX(b),this.Positions.setLastMouseY(c),f!==!1&&(null!==this.Positions.getX()&&(this.el.style.left=this.Positions.getX()+"px"),null!==this.Positions.getY()&&(this.el.style.top=this.Positions.getY()+"px"),"function"==typeof this.options.onDrag&&this.options.onDrag(a,this.el))},mouseupHandler:function(a){f!==!1&&("function"==typeof this.options.onStop&&this.options.onStop(a,this.el),this.el.style.zIndex="",f=!1)},extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}},a});