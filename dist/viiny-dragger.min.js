/*! viiny-dragger 2015-12-08 */
var ViinyDragger=function(){"use strict";function a(a,c){var d=0;for(b=this,b.defaults={onStart:function(a,b){},onMove:function(a,b){},onStop:function(a,b){},axis:null,snapX:1,snapY:1},b.elm=document.querySelectorAll(a),b.activeElm=null,b.lastMouseX=0,b.lastMouseY=0,b.elmX=0,b.elmY=0,d=0;d<b.elm.length;d++)b.extend(b.elm[d],b.defaults),b.extend(b.elm[d],b.checkOptions(c)),b.addMouseDownListener(b.elm[d])}var b;return a.prototype.checkOptions=function(a){return a.snapX=a.snapX===parseInt(a.snapX,10)?a.snapX:1,a.snapY=a.snapY===parseInt(a.snapY,10)?a.snapY:1,a},a.prototype.extend=function(a,b){var c=null;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},a.prototype.addMouseDownListener=function(a){a.onmousedown=function(a){return b.start(this,a),document.onmousemove=b.move,document.onmouseup=b.stop,!1}},a.prototype.start=function(a,c){"function"==typeof a.onStart&&a.onStart(a,c),b.activeElm=a,a.style.zIndex=9999,b.lastMouseX=document.all?window.event.clientX:c.pageX,b.lastMouseY=document.all?window.event.clientY:c.pageY,b.elmX=b.lastMouseX-a.offsetLeft,b.elmY=b.lastMouseY-a.offsetTop},a.prototype.move=function(a){b.lastMouseX=document.all?window.event.clientX:a.pageX,b.lastMouseY=document.all?window.event.clientY:a.pageY,null!==b.activeElm&&("function"==typeof b.activeElm.onMove&&b.activeElm.onMove(b.activeElm,a),"x"==b.activeElm.axis?b.setPosition("x",b.lastMouseX-b.elmX):"y"==b.activeElm.axis?b.setPosition("y",b.lastMouseY-b.elmY):(b.setPosition("x",b.lastMouseX-b.elmX),b.setPosition("y",b.lastMouseY-b.elmY)))},a.prototype.stop=function(a){null!==b.activeElm&&("function"==typeof b.activeElm.onStop&&b.activeElm.onStop(b.activeElm,a),b.activeElm.style.zIndex="",b.activeElm=null)},a.prototype.setPosition=function(a,c){"x"==a?b.activeElm.style.left=Math.round(c/b.activeElm.snapX)*b.activeElm.snapX+"px":"y"==a&&(b.activeElm.style.top=Math.round(c/b.activeElm.snapY)*b.activeElm.snapY+"px")},a}();