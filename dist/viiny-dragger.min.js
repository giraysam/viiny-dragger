/*! viiny-dragger 2015-12-19 */
var ViinyDragger=function(a){"use strict";var b,c,d,e,f;return ViinyDragger=function(a,e){var g,h,i;if(b=this,b.activeElm=null,b.activeElmX=0,b.activeElmY=0,b.lastMouseX=0,b.lastMouseY=0,b.defaultOptions={snapX:1,snapY:1},"string"!=typeof a)return a;if(g=document.querySelectorAll(a),g.length>0){for(h=0;h<g.length;h++)this[h]=g[h],i=b.extend(b.defaultOptions,e),this[h].options=i,this[h].onmousedown=function(a){return b.mousedownHandler(a,this),!1};this.length=g.length,d=new c,d=new f(d)}},c=function(){},c.prototype={getX:function(){return b.lastMouseX-b.activeElmX},getY:function(){return b.lastMouseY-b.activeElmY}},e=function(a){this.position=a},e.prototype={getX:function(){return this.position.getX()},getY:function(){return this.position.getY()}},f=function(a){e.call(this,a)},f.prototype=new e,f.prototype.getX=function(){var a=b.activeElm.options.snapX;return Math.round(this.position.getX()/a)*a},f.prototype.getY=function(){var a=b.activeElm.options.snapY;return Math.round(this.position.getY()/a)*a},ViinyDragger.prototype={mousedownHandler:function(c,d){this.setActiveElement(d),d.style.zIndex=99999,b.lastMouseX=document.all?a.event.clientX:c.pageX,b.lastMouseY=document.all?a.event.clientY:c.pageY,b.activeElmX=b.lastMouseX-d.offsetLeft,b.activeElmY=b.lastMouseY-d.offsetTop,document.onmousemove=this.mousemoveHandler,document.onmouseup=this.mouseupHandler},mousemoveHandler:function(c){b.lastMouseX=document.all?a.event.clientX:c.pageX,b.lastMouseY=document.all?a.event.clientY:c.pageY,null!==b.activeElm&&(b.activeElm.style.left=d.getX()+"px",b.activeElm.style.top=d.getY()+"px")},mouseupHandler:function(a){null!==b.activeElm&&(b.activeElm.style.zIndex="",b.activeElm=null)},setActiveElement:function(a){b.activeElm=a},extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}},ViinyDragger}(window);