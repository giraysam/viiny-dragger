/*! viiny-dragger 2015-12-21 */
!function(a){"use strict";var b,c,d,e,f,g,h;h=function(a,b){return this instanceof h?void 0:new h.instance(a,b)},h.instance=function(a,e){var h,i,j;if(b=this,b.activeElm=null,b.activeElmX=0,b.activeElmY=0,b.lastMouseX=0,b.lastMouseY=0,j={snapX:1,snapY:1,axisX:!0,axisY:!0},"string"!=typeof a)return a;if(h=document.querySelectorAll(a),h.length>0){for(i=0;i<h.length;i++)this[i]=h[i],this[i].options=b.extend(j,e),this[i].onmousedown=function(a){return b.mousedownHandler(a,this),!1};this.length=h.length,d=new c,d=new f(d),d=new g(d)}return this},c=function(){},c.prototype={getX:function(){return b.lastMouseX-b.activeElmX},getY:function(){return b.lastMouseY-b.activeElmY}},e=function(a){this.position=a},e.prototype={getX:function(){return this.position.getX()},getY:function(){return this.position.getY()}},f=function(a){e.call(this,a)},f.prototype=new e,f.prototype.getX=function(){var a=b.activeElm.options.snapX;return Math.round(this.position.getX()/a)*a},f.prototype.getY=function(){var a=b.activeElm.options.snapY;return Math.round(this.position.getY()/a)*a},g=function(a){e.call(this,a)},g.prototype=new e,g.prototype.getX=function(){var a=b.activeElm.options.axisX;return 1==a?this.position.getX():null},g.prototype.getY=function(){var a=b.activeElm.options.axisY;return 1==a?this.position.getY():null},h.prototype={mousedownHandler:function(c,d){c.preventDefault(),this.setActiveElement(d),d.style.zIndex=99999,b.lastMouseX=document.all?a.event.clientX:c.pageX,b.lastMouseY=document.all?a.event.clientY:c.pageY,b.activeElmX=b.lastMouseX-d.offsetLeft,b.activeElmY=b.lastMouseY-d.offsetTop,document.onmousemove=this.mousemoveHandler,document.onmouseup=this.mouseupHandler},mousemoveHandler:function(c){b.lastMouseX=document.all?a.event.clientX:c.pageX,b.lastMouseY=document.all?a.event.clientY:c.pageY,null!==b.activeElm&&(null!=d.getX()&&(b.activeElm.style.left=d.getX()+"px"),null!=d.getY()&&(b.activeElm.style.top=d.getY()+"px"))},mouseupHandler:function(a){null!==b.activeElm&&(b.activeElm.style.zIndex="",b.activeElm=null)},setActiveElement:function(a){b.activeElm=a},extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}},h.instance.prototype=h.prototype,a.ViinyDragger=h}(window);